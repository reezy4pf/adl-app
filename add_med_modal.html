<!-- Add Med Modal -->
<div id="add-med-modal" class="modal-overlay">
    <div class="modal-card" style="position: relative;">
        <button class="close-modal-btn" onclick="closeAddMedModal()"
            style="position: absolute; top: 16px; right: 16px; font-size: 1.2rem; background: none; border: none; cursor: pointer; color: #4B5563; z-index: 10;">
            <i class="fas fa-times"></i>
        </button>
        <h2 class="modal-title">Add Medication</h2>

        <div class="form-group">
            <label class="form-label">Medication Name</label>
            <input type="text" id="med-name" class="form-input" placeholder="e.g., Risperidone">
        </div>

        <!-- Row 1: Unit -->
        <div class="form-group">
            <label class="form-label">Unit Type</label>
            <select id="med-dosage-unit" class="form-input" onchange="updateDosageInput()">
                <option value="mg">ğŸ’Š mg (Milligrams)</option>
                <option value="ml">ğŸ’§ ml (Milliliters)</option>
                <option value="pills">âšª Tablet(s) / Pill(s)</option>
                <option value="puffs">ğŸŒ¬ï¸ Puff(s)</option>
                <option value="drops">ğŸ’§ Drop(s)</option>
            </select>
        </div>

        <!-- Row 2: Amount + Frequency -->
        <div style="display: flex; gap: 16px;">
            <div class="form-group" style="flex: 1;">
                <label class="form-label">Amount</label>
                <input type="number" id="med-dosage-amount" class="form-input" placeholder="0.0" step="0.1" min="0">
            </div>
            <div class="form-group" style="flex: 1;">
                <label class="form-label">Times/Day</label>
                <input type="number" id="med-frequency" class="form-input" value="1" min="1">
            </div>
        </div>

        <!-- Reminders Section -->
        <div class="form-group" style="margin-top: 8px;">
            <label class="form-label">Reminders</label>
            <div style="display: flex; align-items: center; gap: 12px;">
                <button class="btn-secondary" onclick="openRemindersModal()"
                    style="padding: 8px 16px; font-size: 0.9rem;">
                    <i class="fas fa-clock" style="margin-right: 6px;"></i> Set Times
                </button>
                <div id="med-reminders-display" style="color: var(--text-secondary); font-size: 0.9rem;">
                    No times set
                </div>
                <input type="hidden" id="med-reminders-data">
            </div>
        </div>

        <!-- Row 3: Inventory + Alert -->
        <div style="display: flex; gap: 16px;">
            <div class="form-group" style="flex: 1;">
                <label class="form-label">Current Count</label>
                <input type="number" id="med-inventory" class="form-input" placeholder="28">
            </div>
            <div class="form-group" style="flex: 1;">
                <label class="form-label">Low Alert At</label>
                <input type="number" id="med-alert" class="form-input" value="5" min="0">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Instructions</label>
            <textarea id="med-instructions" class="form-input" rows="3"
                placeholder="e.g., Take at night with water..."></textarea>
        </div>

        <div class="modal-buttons">
            <button class="btn-modal-secondary" onclick="closeAddMedModal()">Cancel</button>
            <button class="btn-modal-primary" onclick="saveMed()">Save Medication</button>
        </div>
    </div>
</div>